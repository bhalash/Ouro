/*global $:false */
jQuery(document).ready(function(o){"use strict"
var n={anchor:"a.nav",dataCurrent:"is-current",current:"current-nav",menu:"nav#menu",section:"section",shadow:"nav-box-shadow",speed:100},t=function(){0===o(window).scrollTop()?o(n.menu).removeClass(n.shadow):o(n.menu).addClass(n.shadow)},r=function(t){o(n.anchor).removeClass(n.current),o(t).addClass(n.current)},e=function(t){o(n.section).data(n.dataCurrent,!1),o(t).data(n.dataCurrent,!0),r(o(menu).find("a[href^=#"+o(t).attr("id")+"]")),o("html").hasClass("touch")||(o("html").hasClass("webkit")?document.location.hash=o(t).attr("id"):history.pushState(null,null,"#"+o(t).attr("id")))},a=function(){o("section").each(function(){var t=o(n.menu).outerHeight()+20,r=o(n.menu).outerHeight()+70,a=o(this).offset().top,s=o(window).scrollTop(),c=o(this).data(n.dataCurrent)
a>=s-t&&s+r>=a&&!c&&e(this)})},s=function(){var t={upper:255,lower:88},r=t.upper,e=t.upper-t.lower,a=o("#home").height(),s=o(window).scrollTop(),c=s/a
c=0>c?0:c,c=c>1?1:c,r=Math.floor(t.upper-e*c),r=r>t.upper?t.upper:r,r=r<t.lower?t.lower:r,o(n.menu).find(n.anchor).css("color","rgba("+r+","+r+","+r+", 1)")},c=function(){var t=o(window).height()+o("."+n.menu).height(),r=o(window).scrollTop(),e=0
e=r/t,e=0>e?0:e,e=e>1?1:e,o(n.menu).css("background-color","rgba(255,255,255,"+e+")")}
o("html").hasClass("touch")&&o(n.current).hover(function(){o(this).css("background-color","transparent")}),o(window).on("scroll",t),o(window).on("scroll",c),o("html").hasClass("mobile")?o("."+n.current).click(function(){return o("html, body").animate({scrollTop:0}),!1}):(o(window).on("scroll",a),o(window).on("scroll",s),o(n.anchor).click(function(){var t=o(this).attr("href"),s=!1,c=o(t).offset().top,u=o("nav#menu").outerHeight()
return o(window).off("scroll",a),r(this),o("html, body").animate({scrollTop:c-u},500,function(){s||(e(o(t)),s=!0,setTimeout(function(){o(window).scroll(a)},n.speed))}),!1}))})
